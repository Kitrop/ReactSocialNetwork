{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/artem/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/artem/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\artem\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{loginApi,profileApi}from\"../../compo/api/api\";var SET_USER_DATA='SET_USER_DATA';var initialState={id:null,email:null,login:null,isAuth:false,rememberMe:false};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_USER_DATA:{return _objectSpread(_objectSpread({},state),action.data);}default:return state;}};// actionCreator\nexport var setAuthUserData=function setAuthUserData(id,email,login,isAuth){return{type:SET_USER_DATA,data:{id:id,email:email,login:login,isAuth:isAuth}};};// thunkCreator\nexport var loginMeThunk=function loginMeThunk(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var data,_data$data,id,login,email;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return profileApi.getLoginMeApi();case 2:data=_context.sent;if(data.resultCode===0){_data$data=data.data,id=_data$data.id,login=_data$data.login,email=_data$data.email;dispatch(setAuthUserData(id,email,login,true));}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var loginThunk=function loginThunk(email,password,rememberMe){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return loginApi.loginApi(email,password,rememberMe);case 2:data=_context2.sent;if(data.resultCode===0){dispatch(loginMeThunk());}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logoutThunk=function logoutThunk(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return loginApi.logoutApi();case 2:data=_context3.sent;if(data.resultCode===0){dispatch(setAuthUserData(null,null,null,false));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default authReducer;","map":{"version":3,"sources":["C:/Users/artem/my-app/src/redux/reducers/authReducer.js"],"names":["loginApi","profileApi","SET_USER_DATA","initialState","id","email","login","isAuth","rememberMe","authReducer","state","action","type","data","setAuthUserData","loginMeThunk","dispatch","getLoginMeApi","resultCode","loginThunk","password","logoutThunk","logoutApi"],"mappings":"2UAAA,OAAQA,QAAR,CAAkBC,UAAlB,KAAmC,qBAAnC,CAEA,GAAMC,CAAAA,aAAa,CAAG,eAAtB,CAEA,GAAIC,CAAAA,YAAY,CAAG,CACfC,EAAE,CAAE,IADW,CAEfC,KAAK,CAAE,IAFQ,CAGfC,KAAK,CAAE,IAHQ,CAIfC,MAAM,CAAE,KAJO,CAKfC,UAAU,CAAE,KALG,CAAnB,CAQA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBP,YAAyB,IAAXQ,CAAAA,MAAW,2CAClD,OAAOA,MAAM,CAACC,IAAd,EACI,IAAKV,CAAAA,aAAL,CAAoB,CAChB,sCACOQ,KADP,EAEOC,MAAM,CAACE,IAFd,EAIH,CACD,QACI,MAAOH,CAAAA,KAAP,CARR,CAUH,CAXD,CAYA;AACA,MAAO,IAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACV,EAAD,CAAKC,KAAL,CAAYC,KAAZ,CAAmBC,MAAnB,QAA+B,CAACK,IAAI,CAAEV,aAAP,CAAsBW,IAAI,CAAE,CAACT,EAAE,CAAFA,EAAD,CAAKC,KAAK,CAALA,KAAL,CAAYC,KAAK,CAALA,KAAZ,CAAmBC,MAAM,CAANA,MAAnB,CAA5B,CAA/B,EAAxB,CAEP;AACA,MAAO,IAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,kGAAM,iBAAOC,QAAP,2KACbf,CAAAA,UAAU,CAACgB,aAAX,EADa,QAC1BJ,IAD0B,eAE9B,GAAIA,IAAI,CAACK,UAAL,GAAoB,CAAxB,CAA2B,YACEL,IAAI,CAACA,IADP,CAClBT,EADkB,YAClBA,EADkB,CACdE,KADc,YACdA,KADc,CACPD,KADO,YACPA,KADO,CAEvBW,QAAQ,CAACF,eAAe,CAACV,EAAD,CAAKC,KAAL,CAAYC,KAAZ,CAAmB,IAAnB,CAAhB,CAAR,CACH,CAL6B,sDAAN,gEAArB,CAOP,MAAO,IAAMa,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACd,KAAD,CAAQe,QAAR,CAAkBZ,UAAlB,kGAAiC,kBAAOQ,QAAP,sJACtChB,CAAAA,QAAQ,CAACA,QAAT,CAAkBK,KAAlB,CAAyBe,QAAzB,CAAmCZ,UAAnC,CADsC,QACnDK,IADmD,gBAEvD,GAAIA,IAAI,CAACK,UAAL,GAAoB,CAAxB,CAA2B,CACvBF,QAAQ,CAACD,YAAY,EAAb,CAAR,CACH,CAJsD,wDAAjC,kEAAnB,CAMP,MAAO,IAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,mGAAM,kBAAOL,QAAP,sJACZhB,CAAAA,QAAQ,CAACsB,SAAT,EADY,QACzBT,IADyB,gBAE7B,GAAIA,IAAI,CAACK,UAAL,GAAoB,CAAxB,CAA2B,CACvBF,QAAQ,CAACF,eAAe,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmB,KAAnB,CAAhB,CAAR,CACH,CAJ4B,wDAAN,kEAApB,CASP,cAAeL,CAAAA,WAAf","sourcesContent":["import {loginApi, profileApi} from \"../../compo/api/api\";\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA'\r\n\r\nlet initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    rememberMe: false\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case SET_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n// actionCreator\r\nexport const setAuthUserData = (id, email, login, isAuth) => ({type: SET_USER_DATA, data: {id, email, login, isAuth} });\r\n\r\n// thunkCreator\r\nexport const loginMeThunk = () => async (dispatch) => {\r\n    let data = await profileApi.getLoginMeApi()\r\n    if (data.resultCode === 0) {\r\n        let {id, login, email} = data.data\r\n        dispatch(setAuthUserData(id, email, login, true))\r\n    }\r\n}\r\nexport const loginThunk = (email, password, rememberMe) => async (dispatch) => {\r\n    let data = await loginApi.loginApi(email, password, rememberMe)\r\n    if (data.resultCode === 0) {\r\n        dispatch(loginMeThunk())\r\n    }\r\n}\r\nexport const logoutThunk = () => async (dispatch) => {\r\n    let data = await loginApi.logoutApi()\r\n    if (data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default authReducer;"]},"metadata":{},"sourceType":"module"}